
<div class="dashboard-container">
 
  <div class="dashboard-sidebar">
    
    <div class="sidebar-logo">
      <img src="/assets/images/maghrebia.png" alt="Logo Assurance" />


    </div>

    <ul class="sidebar-menu">
      <li class="active">
        <i class="fas fa-chart-pie"></i> <!-- changé pour un visuel plus dashboard -->
        <span>Dashboard</span>
      </li>
      <li (click)="navigate('/contrat')">
        <i class="fas fa-file-signature"></i>
        <span>Contrat</span>
      </li>
      <li (click)="navigate('/assurance')">
        <i class="fas fa-shield-alt"></i>
        <span>Assurance</span>
      </li>
      <li (click)="navigate('/reclamation')">
        <i class="fas fa-comment-dots"></i>
        <span>Réclamation</span>
      </li>
      <li (click)="navigate('/users')">
        <i class="fas fa-users"></i>
        <span>Liste d'utilisateurs</span>
      </li>
      <li (click)="toggleMenu()" [class.active]="isMenuOpen">
        <i class="fas fa-cogs"></i>
        <span>Paramètres</span>
      </li>
    
      <ul *ngIf="isMenuOpen" class="submenu">
        <li (click)="navigate('/profile')">
          <i class="fas fa-id-card"></i> Profil
        </li>
        <li (click)="updateProfile(Info?.ourUsers?.id)">
          <i class="fas fa-user-edit"></i> Modifier Profil
        </li>
        <li (click)="logout()" class="logout">
          <i class="fas fa-sign-out-alt"></i> Se déconnecter
        </li>
      </ul>
    </ul>
    
  </div>

  

  <div class="dashboard-main">
    <div class="dashboard-header">
      <div class="header-search">
        <input type="text" placeholder="Search..." class="search-input">
        <i class="fas fa-search search-icon"></i>
      </div>
      <div class="header-profile" (click)="toggleMenu()" tabindex="0">
        <img [src]="userImage" alt="User" class="profile-img" />
        <div class="profile-text">
          <span class="user-name">{{ userName }}</span>
          <small class="user-role">{{role}}</small>
        </div>
        <i class="fas fa-chevron-down chevron-icon"></i>
      
        <div *ngIf="isMenuOpen" class="profile-dropdown">
          <ul>
            <li (click)="navigate('/profile')">Profil</li>
            <li (click)="updateProfile(Info?.ourUsers?.id)">Modifier Profil</li>
            <li (click)="logout()" class="logout">Se déconnecter</li>
          </ul>
        </div>
      </div>
      
    </div>

    <div class="dashboard-content">
      <div class="stats-container">
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-users"></i>
          </div>
          <div class="stat-details">
            <h4>Totale d'Utilisateurs</h4>
            <div class="stat-number">{{ totalUsers }} </div>
            <div class="stat-change positive">+15% from last month</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-file-contract"></i>
          </div>
          <div class="stat-details">
            <h4>Active Policies</h4>
            <div class="stat-number">567</div>
            <div class="stat-change positive">+8% from last month</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-clock"></i>
          </div>
          <div class="stat-details">
            <h4>Pending Claims</h4>
            <div class="stat-number">89</div>
            <div class="stat-change negative">-5% from last month</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-dollar-sign"></i>
          </div>
          <div class="stat-details">
            <h4>Revenue</h4>
            <div class="stat-number">$12,345</div>
            <div class="stat-change positive">+12% from last month</div>
          </div>
        </div>
      </div>
      <div class="grid-item chart-container">
        <h3>Utilisateurs par année</h3>
        <div class="chart">
          <canvas id="usersPerYearChart"></canvas>
        </div>
      </div>
      <div class="dashboard-grid">
        <div class="grid-item chart-container">
          <h3>Revenue Overview</h3>
          <div class="chart">
            <canvas id="revenueChart"></canvas>
          </div>
        </div>

        <div class="grid-item recent-activities">
          <h3>Recent Activities</h3>
          <ul class="activity-list">
            <li>
              <i class="fas fa-user-plus"></i>
              <div class="activity-details">
                <p>New user registered</p>
                <span>5 minutes ago</span>
              </div>
            </li>
            <li>
              <i class="fas fa-file-signature"></i>
              <div class="activity-details">
                <p>New policy created</p>
                <span>2 hours ago</span>
              </div>
            </li>
            <li>
              <i class="fas fa-exclamation-circle"></i>
              <div class="activity-details">
                <p>New claim submitted</p>
                <span>4 hours ago</span>
              </div>
            </li>
          </ul>
        </div>

        <div class="grid-item quick-actions">
          <h3>Quick Actions</h3>
          <div class="action-buttons">
            <button class="btn-action" (click)="addUser()">
              <i class="fas fa-user-plus"></i>
              Add User
            </button>
            <button class="btn-action" (click)="createNewPolicy()">
              <i class="fas fa-file-medical"></i>
              New Policy
            </button>
            <button class="btn-action" (click)="generateReport()">
              <i class="fas fa-chart-line"></i>
              Generate Report
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>