<section class="contact-us">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-10">
          <!-- Sinister List Card -->
          <div class="card mb-4">
            <div class="card-header bg-primary text-white">
              <h2 class="mb-0">Sinisters</h2>
            </div>
            <div class="card-body">
              <table class="table table-striped table-bordered">
                <thead>
                  <tr>
                    <th>Accident Date</th>
                    <th>Client ID</th>
                    <th>Declaration Date</th>
                    <th>Location</th>
                    <th>Type</th>
                    <th>Description</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let sinister of sinisters">
                    <td>{{ sinister.dateAccident | date }}</td>
                    <td>{{ sinister.idClient }}</td>
                    <td>{{ sinister.dateDeclaration | date }}</td>
                    <td>{{ sinister.accidentLocation }}</td>
                    <td>{{ sinister.typeSinister }}</td>
                    <td>{{ sinister.description }}</td>
                    <td>{{ sinister.status }}</td>
                    <td>
                      <button class="btn btn-sm btn-warning me-2" (click)="editSinister(sinister)">Edit</button>
                      <button class="btn btn-sm btn-danger" (click)="deleteSinister(sinister.sinisterId!)">Delete</button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          
          <!-- Create Form Card -->
          <div *ngIf="!isEditing; else editForm">
            <div class="card">
              <div class="card-header bg-success text-white">
                <h3 class="mb-0">Add Sinister</h3>
              </div>
              <div class="card-body">
                <form (ngSubmit)="createSinister()">
                  <div class="form-group mb-3">
                    <label for="newAccidentDate">Accident Date: *</label>
                    <input type="date" id="newAccidentDate" class="form-control"
                           [(ngModel)]="newSinister.dateAccident" name="newAccidentDate" required>
                  </div>
  
                  <div class="form-group mb-3">
                    <label for="newDeclarationDate">Declaration Date: *</label>
                    <input type="date" id="newDeclarationDate" class="form-control"
                           [(ngModel)]="newSinister.dateDeclaration" name="newDeclarationDate" required>
                  </div>
  
                  <div class="form-group mb-3">
                    <label for="newLocation">Location: *</label>
                    <input type="text" id="newLocation" class="form-control"
                           [(ngModel)]="newSinister.accidentLocation" name="newLocation" required>
                  </div>
  
                  <div class="form-group mb-3">
                    <label for="newType">Type: *</label>
                    <input type="text" id="newType" class="form-control"
                           [(ngModel)]="newSinister.typeSinister" name="newType" required>
                  </div>
  
                  <div class="form-group mb-3">
                    <label for="newDescription">Description: *</label>
                    <textarea id="newDescription" class="form-control" rows="3"
                            [(ngModel)]="newSinister.description" name="newDescription" required></textarea>
                  </div>
  
                  <div class="form-group mb-3">
                    <label for="newStatus">Status: *</label>
                    <select id="newStatus" class="form-control"
                            [(ngModel)]="newSinister.status" name="newStatus" required>
                      <option value="IN_PROGRESS">In Progress</option>
                      <option value="ACCEPTED">Accepted</option>
                      <option value="REFUSED">Refused</option>
                    </select>
                  </div>

                  <!-- New idClient input -->
                  <div class="form-group mb-3">
                    <label for="newIdClient">Client ID: *</label>
                    <input type="number" id="newIdClient" class="form-control"
                           [(ngModel)]="newSinister.idClient" name="newIdClient" required>
                  </div>
  
                  <button type="submit" class="btn btn-success">Create</button>
                </form>
              </div>
            </div>
          </div>
          
          <!-- Edit Form Template -->
          <ng-template #editForm>
            <div class="card">
              <div class="card-header bg-warning text-dark">
                <h3 class="mb-0">Edit Sinister</h3>
              </div>
              <div class="card-body">
                <form (ngSubmit)="updateSinister()">
                  <div class="form-group mb-3">
                    <label for="editAccidentDate">Accident Date: *</label>
                    <input type="date" id="editAccidentDate" class="form-control"
                           [(ngModel)]="selectedSinister.dateAccident" name="editAccidentDate" required>
                  </div>
  
                  <div class="form-group mb-3">
                    <label for="editDeclarationDate">Declaration Date: *</label>
                    <input type="date" id="editDeclarationDate" class="form-control"
                           [(ngModel)]="selectedSinister.dateDeclaration" name="editDeclarationDate" required>
                  </div>
  
                  <div class="form-group mb-3">
                    <label for="editLocation">Location: *</label>
                    <input type="text" id="editLocation" class="form-control"
                           [(ngModel)]="selectedSinister.accidentLocation" name="editLocation" required>
                  </div>
  
                  <div class="form-group mb-3">
                    <label for="editType">Type: *</label>
                    <input type="text" id="editType" class="form-control"
                           [(ngModel)]="selectedSinister.typeSinister" name="editType" required>
                  </div>
  
                  <div class="form-group mb-3">
                    <label for="editDescription">Description: *</label>
                    <textarea id="editDescription" class="form-control" rows="3"
                            [(ngModel)]="selectedSinister.description" name="editDescription" required></textarea>
                  </div>
  
                  <div class="form-group mb-3">
                    <label for="editStatus">Status: *</label>
                    <select id="editStatus" class="form-control"
                            [(ngModel)]="selectedSinister.status" name="editStatus" required>
                      <option value="IN_PROGRESS">In Progress</option>
                      <option value="ACCEPTED">Accepted</option>
                      <option value="REFUSED">Refused</option>
                    </select>
                  </div>
  
                  <button type="submit" class="btn btn-warning me-2">Update</button>
                  <button type="button" class="btn btn-secondary" (click)="cancelEdit()">Cancel</button>
                </form>
              </div>
            </div>
          </ng-template>
        </div>
      </div>
    </div>
  </section>