{"ast":null,"code":"import { Observable, Subject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport class VoiceRecognitionService {\n  constructor() {\n    this.isListening = false;\n    this.text = '';\n    this.tempWords = '';\n    this.transcript = new Subject();\n    const {\n      webkitSpeechRecognition\n    } = window;\n  }\n  static {\n    this.ɵfac = function VoiceRecognitionService_Factory(t) {\n      return new (t || VoiceRecognitionService)();\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: VoiceRecognitionService,\n      factory: VoiceRecognitionService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}\nthis.recognition = new webkitSpeechRecognition();\nthis.recognition.continuous = true;\nthis.recognition.interimResults = true;\nthis.recognition.lang = 'fr-FR';\nthis.recognition.onresult = event => {\n  const transcript = Array.from(event.results).map(result => result[0].transcript).join('');\n  this.tempWords = transcript;\n};\nthis.recognition.onend = () => {\n  this.wordConcat();\n  this.isListening = false;\n  console.log('End speech recognition');\n};\nstart();\n{\n  if (!this.isListening) {\n    this.recognition.start();\n    this.isListening = true;\n    console.log('Speech recognition started');\n  } else {\n    console.log('Recognition is already running');\n  }\n}\nstop();\n{\n  if (this.isListening) {\n    this.recognition.stop();\n    this.isListening = false;\n    console.log('Speech recognition stopped');\n  }\n}\nwordConcat();\n{\n  if (this.tempWords.trim()) {\n    this.text = `${this.text} ${this.tempWords}.`.replace(/\\s+/g, ' ').trim();\n    this.transcript.next(this.text);\n    this.tempWords = '';\n  }\n}\ngetTranscript();\nObservable < string > {\n  return: this.transcript.asObservable()\n};","map":{"version":3,"names":["Observable","Subject","VoiceRecognitionService","constructor","isListening","text","tempWords","transcript","webkitSpeechRecognition","window","factory","ɵfac","providedIn","recognition","continuous","interimResults","lang","onresult","event","Array","from","results","map","result","join","onend","wordConcat","console","log","start","stop","trim","replace","next","getTranscript","string","return","asObservable"],"sources":["C:\\Users\\Malek\\Desktop\\pidev\\insurance-front\\src\\app\\services\\voice-recognition.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable, Subject } from 'rxjs';\ndeclare var webkitSpeechRecognition: any;\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class VoiceRecognitionService {\n  recognition: any;\n  isListening = false;\n  text = '';\n  tempWords = '';\n  transcript = new Subject<string>();\n\n  constructor() {\n   \n    const { webkitSpeechRecognition }: IWindow = window as IWindow;}\n    this.recognition = new webkitSpeechRecognition();\n    this.recognition.continuous = true;\n    this.recognition.interimResults = true;\n    this.recognition.lang = 'fr-FR';\n\n    this.recognition.onresult = (event: any) => {\n      const transcript = Array.from(event.results)\n        .map((result: any) => result[0].transcript)\n        .join('');\n      this.tempWords = transcript;\n    };\n\n    this.recognition.onend = () => {\n      this.wordConcat();\n      this.isListening = false;\n      console.log('End speech recognition');\n    };\n  }\n\n  start() {\n    if (!this.isListening) {\n      this.recognition.start();\n      this.isListening = true;\n      console.log('Speech recognition started');\n    } else {\n      console.log('Recognition is already running');\n    }\n  }\n\n  stop() {\n    if (this.isListening) {\n      this.recognition.stop();\n      this.isListening = false;\n      console.log('Speech recognition stopped');\n    }\n  }\n\n  wordConcat() {\n    if (this.tempWords.trim()) {\n      this.text = `${this.text} ${this.tempWords}.`.replace(/\\s+/g, ' ').trim();\n      this.transcript.next(this.text);\n      this.tempWords = '';\n    }\n  }\n\n  getTranscript(): Observable<string> {\n    return this.transcript.asObservable();\n  }\n}\n\n"],"mappings":"AACA,SAA0BA,UAAU,EAAEC,OAAO,QAAQ,MAAM;;AAO3D,OAAM,MAAOC,uBAAuB;EAOlCC,YAAA;IALA,KAAAC,WAAW,GAAG,KAAK;IACnB,KAAAC,IAAI,GAAG,EAAE;IACT,KAAAC,SAAS,GAAG,EAAE;IACd,KAAAC,UAAU,GAAG,IAAIN,OAAO,EAAU;IAIhC,MAAM;MAAEO;IAAuB,CAAE,GAAYC,MAAiB;EAAC;;;uBATtDP,uBAAuB;IAAA;EAAA;;;aAAvBA,uBAAuB;MAAAQ,OAAA,EAAvBR,uBAAuB,CAAAS,IAAA;MAAAC,UAAA,EAFtB;IAAM;EAAA;;AAYhB,IAAI,CAACC,WAAW,GAAG,IAAIL,uBAAuB,EAAE;AAChD,IAAI,CAACK,WAAW,CAACC,UAAU,GAAG,IAAI;AAClC,IAAI,CAACD,WAAW,CAACE,cAAc,GAAG,IAAI;AACtC,IAAI,CAACF,WAAW,CAACG,IAAI,GAAG,OAAO;AAE/B,IAAI,CAACH,WAAW,CAACI,QAAQ,GAAIC,KAAU,IAAI;EACzC,MAAMX,UAAU,GAAGY,KAAK,CAACC,IAAI,CAACF,KAAK,CAACG,OAAO,CAAC,CACzCC,GAAG,CAAEC,MAAW,IAAKA,MAAM,CAAC,CAAC,CAAC,CAAChB,UAAU,CAAC,CAC1CiB,IAAI,CAAC,EAAE,CAAC;EACX,IAAI,CAAClB,SAAS,GAAGC,UAAU;AAC7B,CAAC;AAED,IAAI,CAACM,WAAW,CAACY,KAAK,GAAG,MAAK;EAC5B,IAAI,CAACC,UAAU,EAAE;EACjB,IAAI,CAACtB,WAAW,GAAG,KAAK;EACxBuB,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;AACvC,CAAC;AAGHC,KAAK,EAAE;AAAC;EACN,IAAI,CAAC,IAAI,CAACzB,WAAW,EAAE;IACrB,IAAI,CAACS,WAAW,CAACgB,KAAK,EAAE;IACxB,IAAI,CAACzB,WAAW,GAAG,IAAI;IACvBuB,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC;GAC1C,MAAM;IACLD,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;;;AAIjDE,IAAI,EAAE;AAAC;EACL,IAAI,IAAI,CAAC1B,WAAW,EAAE;IACpB,IAAI,CAACS,WAAW,CAACiB,IAAI,EAAE;IACvB,IAAI,CAAC1B,WAAW,GAAG,KAAK;IACxBuB,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC;;;AAI7CF,UAAU,EAAE;AAAC;EACX,IAAI,IAAI,CAACpB,SAAS,CAACyB,IAAI,EAAE,EAAE;IACzB,IAAI,CAAC1B,IAAI,GAAG,GAAG,IAAI,CAACA,IAAI,IAAI,IAAI,CAACC,SAAS,GAAG,CAAC0B,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAACD,IAAI,EAAE;IACzE,IAAI,CAACxB,UAAU,CAAC0B,IAAI,CAAC,IAAI,CAAC5B,IAAI,CAAC;IAC/B,IAAI,CAACC,SAAS,GAAG,EAAE;;;AAIvB4B,aAAa,EAAE;AAAElC,UAAU,GAACmC,MAAM,GAAE;EAClCC,MAAM,EAAC,IAAI,CAAC7B,UAAU,CAAC8B,YAAY;CACpC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}